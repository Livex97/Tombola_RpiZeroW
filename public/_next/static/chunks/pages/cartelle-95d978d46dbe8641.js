(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{8580:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cartelle",function(){return r(1235)}])},1235:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(9815),n=r(5893),l=r(7294),d=r(1163),i=r(7642),s=function(){for(var e=function(e){var a=0,n=[0,1,2,3,4,5,6,7,8].sort((function(){return Math.random()-.5})),l=!0,d=!1,i=void 0;try{for(var s,o=n[Symbol.iterator]();!(l=(s=o.next()).done);l=!0){var c=s.value;a<5&&r[c].length>0&&(t[e][c]=r[c].pop(),a++)}}catch(m){d=!0,i=m}finally{try{l||null==o.return||o.return()}finally{if(d)throw i}}},t=Array.from({length:3},(function(){return Array(9).fill(null)})),r=Array.from({length:9},(function(e,t){for(var r=8===t?90:10*t+9,a=[],n=0===t?1:10*t;n<=r;n++)a.push(n);return a.sort((function(){return Math.random()-.5}))})),a=0;a<3;a++)e(a);return t},o=r(1470);const c=(0,r(1373).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var m,u=r(6330),x=r(9883);function f(){var e=(0,d.useRouter)(),t=e.query,r=t.num,f=t.name,h=(0,l.useState)([]),b=h[0],p=h[1],g=(0,l.useState)([]),w=g[0],v=g[1],j=(0,l.useState)([]),N=j[0],y=j[1],k=(0,l.useState)(null),_=k[0],E=k[1],Z=["ambo","terna","quaterna","cinquina","tombola"],A=(0,l.useCallback)((function(){var e=N.length;if(!(e>=Z.length)){var t=Z[e],r=!1;b.forEach((function(e){var n=function(e){var t,r=[];e.nums.forEach((function(e){var t=e.filter((function(e){return e&&w.includes(e)})).length;r.push(t)}));var n=(t=Math).max.apply(t,(0,a.Z)(r));return{ambo:n>=2,terna:n>=3,quaterna:n>=4,cinquina:n>=5,tombola:15===r.reduce((function(e,t){return e+t}),0)}}(e);n[t]&&(r=!0)})),r&&m.emit("claim-goal",{goal:t,name:f})}}),[b,w,N,f]);return(0,l.useEffect)((function(){A()}),[w,A]),(0,l.useEffect)((function(){if(r){for(var e=parseInt(r)||1,t=new Set,a=[],n=0;n<e;n++){var l=void 0;do{l=Math.floor(1e4*Math.random())}while(t.has(l));t.add(l),a.push({id:l,nums:s()})}p(a)}}),[r]),(0,l.useEffect)((function(){if(f)return(m=(0,i.ZP)({transports:["websocket"]})).on("init-state",(function(e){v(e.drawnNumbers),y(e.claimedGoals.map((function(e){return e.goal}))),m.emit("join-as-player",{name:f,numCards:r})})),m.on("number-drawn",(function(e){v((function(t){return(0,a.Z)(new Set((0,a.Z)(t).concat([e])))}))})),m.on("goal-claimed",(function(e){var t,r;y((function(t){return(0,a.Z)(t).concat([e.goal])})),t=e.goal,r=e.winner,E({goal:t,winner:r}),setTimeout((function(){return E(null)}),5e3),(0,x.Z)({particleCount:150,spread:70,origin:{y:.6},colors:["#ff0000","#00ff00","#ffffff","#ffd700"]})})),m.on("game-reset",(function(){v([]),y([])})),function(){return m.disconnect()}}),[f,r]),(0,n.jsxs)("div",{className:"min-h-screen p-4 bg-gradient-to-b from-green-900 to-red-900 flex flex-col items-center relative md:pb-20 pb-[2rem]",children:[_&&(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-70 animate-in fade-in duration-300 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"bg-yellow-400 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] border-8 border-white shadow-2xl text-center transform animate-in zoom-in duration-500 w-full max-w-md md:max-w-2xl",children:[(0,n.jsx)(o.Z,{className:"w-16 h-16 md:w-24 md:h-24 text-red-600 mx-auto mb-4 md:mb-6 animate-bounce"}),(0,n.jsxs)("h2",{className:"text-3xl md:text-5xl font-black text-red-900 uppercase italic mb-2",children:[_.goal,"!"]}),(0,n.jsx)("p",{className:"text-lg md:text-2xl font-bold text-red-800",children:"Il vincitore \xe8:"}),(0,n.jsx)("p",{className:"text-4xl md:text-6xl font-black text-green-700 mt-2 md:mt-4 drop-shadow-sm break-words",children:_.winner})]})}),(0,n.jsxs)("div",{className:"w-full max-w-4xl flex justify-between items-center mb-10 bg-white bg-opacity-10 backdrop-blur-md p-4 rounded-3xl border border-white border-opacity-10",children:[(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(c,{className:"text-yellow-400 fill-current w-6 h-6 animate-pulse"}),(0,n.jsxs)("h1",{className:"text-2xl md:text-4xl font-black text-yellow-400 italic tracking-tighter uppercase",children:["Gara di ",f]})]})}),(0,n.jsx)("button",{onClick:function(){return e.push("/")},className:"bg-white bg-opacity-10 hover:bg-opacity-20 text-white p-3 rounded-2xl transition-all active:scale-95",children:(0,n.jsx)(u.Z,{className:"w-6 h-6"})})]}),(0,n.jsx)("div",{className:"grid grid-cols-1 gap-8 w-full max-w-4xl mb-20 z-20",children:b.map((function(e){return(0,n.jsxs)("div",{className:"bg-white rounded-[2rem] md:rounded-[3rem] shadow-xl relative overflow-hidden group transform transition-all",children:[(0,n.jsxs)("div",{className:"bg-gradient-to-r from-red-600 to-red-700 h-12 md:h-16 flex items-center px-5 md:px-8 justify-between shadow-xl border-b-4 border-red-800",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,n.jsx)("div",{className:"w-3 h-3 md:w-4 md:h-4 bg-yellow-400 rounded-full shadow-[0_0_10px_rgba(250,204,21,0.8)]"}),(0,n.jsx)("span",{className:"text-white font-black text-lg md:text-xl italic uppercase tracking-tighter",children:"Tabella Fortunata"})]}),(0,n.jsxs)("div",{className:"bg-white text-red-600 px-2 py-1 md:px-6 md:py-1.5 rounded-[1rem] md:rounded-[1.5rem] font-black text-lg md:text-xl shadow-[0_4px_0_rgba(0,0,0,0.1)] flex items-center gap-1 md:gap-2 border-2 border-red-100",children:["#",e.id]})]}),(0,n.jsx)("div",{className:"p-4 md:p-8",children:(0,n.jsx)("div",{className:"grid grid-rows-3 gap-2 md:gap-4",children:e.nums.map((function(e,t){return(0,n.jsx)("div",{className:"grid grid-cols-9 gap-1 md:gap-2",children:e.map((function(e,t){return(0,n.jsx)("div",{className:"aspect-square flex items-center justify-center border-b-2 md:border-b-4 border-r-2 text-base md:text-xl font-black rounded-lg md:rounded-2xl transition-all duration-300 ".concat(null===e?"bg-gray-50 border-gray-200":w.includes(e)?"bg-red-600 text-white border-red-800 scale-105 shadow-xl rotate-2 -translate-y-1":"bg-white text-gray-800 border-gray-200 hover:border-red-300 hover:bg-red-50"),children:e},t)}))},t)}))})})]},e.id)}))}),(0,n.jsx)("div",{className:"fixed bottom-4 w-[95%] max-w-4xl z-30",children:(0,n.jsxs)("div",{className:"bg-yellow-400 p-3 md:p-6 rounded-[2rem] md:rounded-[2.5rem] shadow-[0_15px_30px_rgba(0,0,0,0.3)] border-4 border-white flex flex-col md:flex-row items-center justify-between gap-3 md:gap-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,n.jsx)("div",{className:"bg-red-600 text-white w-10 h-10 md:w-16 md:h-16 rounded-xl md:rounded-3xl flex items-center justify-center text-xl md:text-4xl font-black shadow-lg animate-bounce",children:w[w.length-1]||"0"}),(0,n.jsxs)("div",{className:"flex flex-col md:hidden",children:[(0,n.jsx)("span",{className:"text-red-900 text-xs font-black uppercase tracking-tighter",children:"Prossimo Premio:"}),(0,n.jsx)("span",{className:"text-red-900 text-sm font-bold italic uppercase",children:Z[N.length]||"GARA FINITA!"})]}),(0,n.jsx)("span",{className:"hidden md:block text-red-900 text-xl font-bold italic uppercase",children:Z[N.length]||"GARA FINITA!"})]}),(0,n.jsx)("div",{className:"hidden md:flex gap-2 overflow-x-auto w-full md:w-auto pb-2 md:pb-0 no-scrollbar",children:Z.map((function(e){var t=N.includes(e),r=Z[N.length]===e;return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center min-w-[70px] md:min-w-[80px] p-2 rounded-xl md:rounded-2xl border-2 transition-all ".concat(t?"bg-green-600 border-green-400 text-white shadow-lg":r?"bg-white border-red-600 text-red-600 animate-pulse":"bg-white bg-opacity-20 border-red-900 border-opacity-10 text-red-900 opacity-40"),children:[t&&(0,n.jsx)(o.Z,{className:"w-4 h-4 mb-1"}),(0,n.jsx)("span",{className:"text-[10px] font-black uppercase tracking-tighter",children:e})]},e)}))})]})})]})}}},function(e){e.O(0,[416,126,774,888,179],(function(){return t=8580,e(e.s=t);var t}));var t=e.O();_N_E=t}]);