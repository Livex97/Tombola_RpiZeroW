(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4],{8621:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});const n=(0,t(1373).Z)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},8386:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tombolone",function(){return t(8119)}])},8119:function(e,a,t){"use strict";function n(e,a,t,n,r,l,i){try{var o=e[l](i),c=o.value}catch(s){return void t(s)}o.done?a(c):Promise.resolve(c).then(n,r)}t.r(a),t.d(a,{default:function(){return v}});var r=t(9815),l=t(7582),i=t(5893),o=t(7294),c=t(1163),s=t(7642),d=t(7106),m=t(1470),u=t(1373);const p=(0,u.Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var x=t(8621);const f=(0,u.Z)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var h=t(6330);const b=(0,u.Z)("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);var g,w=t(9883);function v(){var e=(0,c.useRouter)(),a=(0,o.useState)([]),t=a[0],u=a[1],v=(0,o.useState)(null),y=v[0],j=v[1],N=(0,o.useState)([]),L=N[0],k=N[1],I=(0,o.useState)({totalPlayers:0,totalCards:0}),O=I[0],z=I[1],A=(0,o.useState)(null),E=A[0],_=A[1],C=["ambo","terna","quaterna","cinquina","tombola"],S=(0,o.useCallback)((function(){var e=function(e){var a=15*e+1,i=Array.from({length:15},(function(e,t){return a+t})),o=function(e){var a,n=[];e.rows.forEach((function(e){var a=e.filter((function(e){return e&&t.includes(e)})).length;n.push(a)}));var l=(a=Math).max.apply(a,(0,r.Z)(n));return{ambo:l>=2,terna:l>=3,quaterna:l>=4,cinquina:l>=5,tombola:15===n.reduce((function(e,a){return e+a}),0)}}({rows:[i.slice(0,5),i.slice(5,10),i.slice(10,15)]});if(o[n])return l=!0,"break"},a=L.length;if(!(a>=C.length)){for(var n=C[a],l=!1,i=0;i<6;i++){if("break"===e(i))break}l&&g.emit("claim-goal",{goal:n,name:"Tombolone"})}}),[t,L]);(0,o.useEffect)((function(){S()}),[t,S]);var Z=function(e,a){!function(e){var a=window.AudioContext||window.webkitAudioContext;if(a){var t=new a,n=t.createOscillator(),r=t.createGain();n.connect(r),r.connect(t.destination);var l={ambo:[440,554],terna:[440,554,659],quaterna:[523,659,783,1046],cinquina:[523,659,783,1046,1318],tombola:[523,659,783,1046,1318,1567]}[e]||[440],i=t.currentTime;l.forEach((function(e,a){n.frequency.setValueAtTime(e,i+.1*a)})),r.gain.setValueAtTime(.1,i),r.gain.exponentialRampToValueAtTime(1e-4,i+1),n.start(i),n.stop(i+1)}}(e),_({goal:e,winner:a}),setTimeout((function(){return _(null)}),5e3),(0,w.Z)({particleCount:200,spread:90,origin:{y:.6},colors:["#ff0000","#00ff00","#ffffff","#ffd700"]})},M=function(){var e,a=(e=function(){return(0,l.__generator)(this,(function(e){return(g=(0,s.ZP)({transports:["websocket"]})).emit("take-tombolone"),g.on("init-state",(function(e){u(e.drawnNumbers),k(e.claimedGoals.map((function(e){return e.goal}))),z({totalPlayers:e.players.length,totalCards:e.players.reduce((function(e,a){return e+(parseInt(a.numCards)||0)}),0)})})),g.on("update-stats",(function(e){z(e)})),g.on("number-drawn",(function(e){u((function(a){return(0,r.Z)(new Set((0,r.Z)(a).concat([e])))})),j(e)})),g.on("goal-claimed",(function(e){k((function(a){return(0,r.Z)(a).concat([e.goal])})),Z(e.goal,e.winner)})),g.on("game-reset",(function(){u([]),j(null),k([])})),[2]}))},function(){var a=this,t=arguments;return new Promise((function(r,l){var i=e.apply(a,t);function o(e){n(i,r,l,o,c,"next",e)}function c(e){n(i,r,l,o,c,"throw",e)}o(void 0)}))});return function(){return a.apply(this,arguments)}}();(0,o.useEffect)((function(){return M(),function(){return g&&g.disconnect()}}),[]);return(0,i.jsxs)("div",{className:"min-h-screen flex flex-col p-4 bg-gradient-to-br from-red-900 via-green-900 to-red-900 relative pb-12",children:[E&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-70 animate-in fade-in duration-300 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"bg-yellow-400 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] border-8 border-white shadow-2xl text-center transform animate-in zoom-in duration-500 w-full max-w-md md:max-w-2xl",children:[(0,i.jsx)(m.Z,{className:"w-16 h-16 md:w-24 md:h-24 text-red-600 mx-auto mb-4 md:mb-6 animate-bounce"}),(0,i.jsxs)("h2",{className:"text-3xl md:text-5xl font-black text-red-900 uppercase italic mb-2",children:[E.goal,"!"]}),(0,i.jsx)("p",{className:"text-lg md:text-2xl font-bold text-red-800",children:"Il vincitore \xe8:"}),(0,i.jsx)("p",{className:"text-4xl md:text-6xl font-black text-green-700 mt-2 md:mt-4 drop-shadow-sm break-words",children:E.winner})]})}),(0,i.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-10 bg-white bg-opacity-10 backdrop-blur-md p-3 md:p-5 rounded-3xl border border-white border-opacity-20 sticky top-4 z-30 gap-2 md:gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,i.jsx)(m.Z,{className:"text-yellow-400 w-6 h-6 md:w-8 md:h-8 animate-bounce"}),(0,i.jsxs)("h1",{className:"text-xl md:text-4xl font-black text-yellow-400 italic tracking-tighter",children:["TOMBOLONE ",(0,i.jsx)("span",{className:"hidden md:inline",children:"REALE"})]})]}),(0,i.jsxs)("div",{className:"flex gap-2 md:gap-4 items-center flex-wrap justify-center md:justify-start",children:[(0,i.jsxs)("div",{className:"bg-blue-600 bg-opacity-30 p-2 md:px-4 md:py-2 rounded-xl md:rounded-2xl border border-blue-400 border-opacity-30 flex items-center gap-1 md:gap-2",children:[(0,i.jsx)(p,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-300"}),(0,i.jsxs)("span",{className:"text-white font-bold text-sm md:text-base",children:[O.totalPlayers," ",(0,i.jsx)("span",{className:"hidden md:inline",children:"Partecipanti"})]})]}),(0,i.jsxs)("div",{className:"bg-purple-600 bg-opacity-30 p-2 md:px-4 md:py-2 rounded-xl md:rounded-2xl border border-purple-400 border-opacity-30 flex items-center gap-1 md:gap-2",children:[(0,i.jsx)(x.Z,{className:"w-4 h-4 md:w-5 md:h-5 text-purple-300"}),(0,i.jsxs)("span",{className:"text-white font-bold text-sm md:text-base",children:[O.totalCards," ",(0,i.jsx)("span",{className:"hidden md:inline",children:"Cartelle"})]})]}),(0,i.jsx)("div",{className:"bg-red-600 bg-opacity-30 p-2 md:px-4 md:py-2 rounded-xl md:rounded-2xl border border-red-400 border-opacity-30 flex items-center gap-1 md:gap-2 md:hidden",children:(0,i.jsxs)("span",{className:"text-white font-bold text-sm",children:[t.length,"/90"]})}),(0,i.jsxs)("button",{onClick:function(){confirm("Sei sicuro di voler resettare il gioco per tutti?")&&g.emit("reset-game")},className:"bg-red-600 hover:bg-red-500 text-white p-2 md:px-6 md:py-3 rounded-xl md:rounded-2xl font-bold transition-all flex items-center gap-1 md:gap-2 shadow-xl active:scale-95",children:[(0,i.jsx)(f,{className:"w-4 h-4 md:w-5 md:h-5"}),(0,i.jsx)("span",{className:"hidden md:block",children:"Reset Gara"})]}),(0,i.jsx)("button",{onClick:function(){confirm("Sei sicuro di voler resettare la partita e tornare alla home?")&&(g.emit("reset-game"),e.push("/"))},className:"bg-white bg-opacity-10 hover:bg-opacity-20 text-white p-2 md:px-6 md:py-3 rounded-xl md:rounded-2xl font-bold transition-all flex items-center gap-1 md:gap-2 shadow-xl active:scale-95",children:(0,i.jsx)(h.Z,{className:"w-4 h-4 md:w-5 md:h-5"})})]})]}),(0,i.jsx)("div",{className:"max-w-7xl mx-auto w-full z-20",children:function(){for(var e=function(e){var t=15*e+1,n=Array.from({length:15},(function(e,a){return t+a}));a.push({id:e+1,rows:[n.slice(0,5),n.slice(5,10),n.slice(10,15)]})},a=[],n=0;n<6;n++)e(n);return(0,i.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-40",children:a.map((function(e){return(0,i.jsxs)("div",{className:"bg-white bg-opacity-10 backdrop-blur-md p-6 rounded-[2.5rem] border-2 border-white border-opacity-20 shadow-2xl relative",children:[(0,i.jsxs)("div",{className:"absolute -top-4 left-8 bg-yellow-400 text-red-900 px-4 py-1 rounded-full font-black text-sm uppercase tracking-widest shadow-lg",children:["Cartella ",e.id]}),(0,i.jsx)("div",{className:"grid grid-rows-3 gap-3 mt-4",children:e.rows.map((function(e,a){return(0,i.jsx)("div",{className:"grid grid-cols-5 gap-3",children:e.map((function(e){return(0,i.jsx)("div",{className:"aspect-square flex items-center justify-center rounded-2xl border-2 text-2xl font-black transition-all duration-500 ".concat(t.includes(e)?"bg-yellow-400 text-red-900 border-yellow-200 scale-105 shadow-[0_0_15px_rgba(250,204,21,0.5)] rotate-2":"bg-white bg-opacity-5 text-white border-white border-opacity-10"),children:e},e)}))},a)}))})]},e.id)}))})}()}),(0,i.jsx)("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 w-[95%] max-w-4xl z-40",children:(0,i.jsxs)("div",{className:"bg-white p-4 md:p-6 rounded-3xl shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex flex-col md:flex-row items-center gap-3 md:gap-6 border-8 border-red-600 relative",children:[(0,i.jsx)("div",{className:"absolute -top-4 -left-4 md:-top-6 md:-left-6 text-2xl md:text-4xl",children:"\ud83c\udf84"}),(0,i.jsx)("div",{className:"absolute -top-4 -right-4 md:-top-6 md:-right-6 text-2xl md:text-4xl",children:"\ud83c\udf81"}),(0,i.jsx)("div",{className:"flex-grow text-center md:text-left",children:y?(0,i.jsxs)("div",{className:"animate-in zoom-in duration-300",children:[(0,i.jsxs)("div",{className:"flex items-center justify-center md:justify-start gap-2 md:gap-4 flex-wrap",children:[(0,i.jsx)("span",{className:"text-4xl md:text-6xl font-black text-red-600 drop-shadow-sm",children:y}),(0,i.jsxs)("span",{className:"text-sm md:text-xl font-bold text-gray-800 italic md:hidden",children:['"',(0,d.h4)()[y],'"']})]}),(0,i.jsxs)("span",{className:"hidden md:block text-xl md:text-2xl font-bold text-gray-800 italic leading-tight",children:['"',(0,d.h4)()[y],'"']})]}):(0,i.jsx)("span",{className:"text-gray-400 text-sm md:text-lg font-medium animate-pulse",children:"In attesa..."})}),(0,i.jsxs)("button",{onClick:function(){if(!(t.length>=90)){var e;do{e=Math.floor(90*Math.random())+1}while(t.includes(e));g.emit("draw-number",e)}},disabled:t.length>=90,className:"w-full md:w-auto bg-gradient-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400 text-white px-4 py-3 md:px-10 md:py-5 rounded-2xl font-black text-lg md:text-2xl shadow-xl transition-all active:scale-95 disabled:grayscale flex items-center justify-center gap-2 md:gap-3",children:[(0,i.jsx)(b,{className:"w-5 h-5 md:w-6 md:h-6"}),(0,i.jsx)("span",{children:"ESTRAI"})]}),(0,i.jsxs)("div",{className:"hidden md:block bg-red-50 p-3 rounded-2xl text-center min-w-[100px] border border-red-100",children:[(0,i.jsx)("span",{className:"text-gray-400 text-xs font-bold uppercase block mb-1",children:"Obiettivo"}),(0,i.jsx)("span",{className:"text-xl font-black text-red-600 uppercase italic",children:C[L.length]||"Fine!"})]}),(0,i.jsxs)("div",{className:"hidden md:block bg-red-50 p-3 rounded-2xl text-center min-w-[100px] border border-red-100",children:[(0,i.jsx)("span",{className:"text-gray-400 text-xs font-bold uppercase block mb-1",children:"Estratti"}),(0,i.jsx)("span",{className:"text-3xl font-black text-red-600",children:t.length}),(0,i.jsx)("span",{className:"text-gray-400 text-xs font-bold",children:" / 90"})]})]})})]})}},7106:function(e,a,t){"use strict";t.d(a,{Gy:function(){return r},h4:function(){return l},lS:function(){return n}});var n={1:"L'Italia",2:" 'A piccerella",3:" 'A gatta",4:" 'O puorco",5:" 'A mano",6:" 'A guallera",7:" 'A sciavula",8:" 'A maronna",9:" 'A figliata",10:" 'E fasule",11:" 'E surice",12:" 'O surdate",13:" 'O santu",14:" 'O mbriaco",15:" 'O guaglione",16:" 'O culo",17:" 'A disgrazia",18:" 'O sanghe",19:" 'A resata",20:" 'A festa",21:" 'A femmena nura",22:" 'O pazzo",23:" 'O scemo",24:" 'E gguardie",25:" 'O Natale",26:" 'Nanninella",27:" 'O c\xe0ntaro",28:" 'E zzizze",29:" 'O pate d''e criature",30:" 'E ppalle d''o tenente",31:" 'O padrone 'e casa",32:" 'O capitone",33:"L'anne 'e Cristo",34:" 'A capa",35:" 'L'auciello",36:" 'O nfamone",37:" 'O monaco",38:" 'E mmazzate",39:" 'A funa n'ganna",40:" 'A paposcia",41:" 'O curtiello",42:" 'O caf\xe9",43:" 'A femmena 'o barcone",44:" 'E ccancelle",45:" 'O vino bbuono",46:" 'E sorde",47:" 'O muorto",48:" 'O muorto che parla",49:" 'O piezzo 'e carne",50:" 'O ppane",51:" 'O giardino",52:" 'A mamma",53:" 'O viecchio",54:" 'O cappiello",55:" 'A museca",56:" 'A caruta",57:" 'O scartellato",58:" 'O paccotto",59:" 'E peli",60:"Se lamente",61:" 'O cacciatore",62:" 'O muorto acciso",63:" 'A sposa",64:" 'A sciammeria",65:" 'O chianto",66:" 'E ddoie zetelle",67:" 'O totaro dint''a chitarra",68:" 'A zuppa cotta",69:"Sott'e n'coppa",70:" 'O palazzo",71:" 'A sedia",72:" 'A maraviglia",73:" 'O spitale",74:" 'A grotta",75:" 'O Pulcinella",76:" 'A funtana",77:" 'E diavulille",78:" 'A bella figliola",79:" 'O lariul\xe0",80:" 'A vocca",81:" 'E sciure",82:" 'A tavula mbandita",83:" 'O maletiempo",84:" 'A chiesa",85:" 'Aneme 'o priatorio",86:" 'A puteca",87:" 'E perucchie",88:" 'E casecavalle",89:" 'A vecchia",90:" 'A paura"},r={1:"L'Italia",2:"La bambina",3:"Il gatto",4:"Il maiale",5:"La mano",6:"La gallina",7:"La schiava",8:"La Madonna",9:"La famiglia",10:"I fagioli",11:"I topi",12:"Il soldato",13:"Il santo",14:"L'ubriaco",15:"Il ragazzo",16:"Il sedere",17:"La disgrazia",18:"Il sangue",19:"La risata",20:"La festa",21:"La donna nuda",22:"Il pazzo",23:"Lo sciocco",24:"Le guardie",25:"Il Natale",26:"Nanninella",27:"La brocca",28:"Le zizze",29:"Il padre delle creature",30:"Le palle del tenente",31:"Il padrone di casa",32:"Il capitone",33:"L'anno di Cristo",34:"La testa",35:"L'uccello",36:"L'infamone",37:"Il monaco",38:"Le mazzate",39:"La fune in gola",40:"La pantofola",41:"Il coltello",42:"Il caff\xe8",43:"La donna del barcone",44:"Le cancelle",45:"Il vino buono",46:"I soldi",47:"Il morto",48:"Il morto che parla",49:"Il pezzo di carne",50:"Il pane",51:"Il giardino",52:"La mamma",53:"Il vecchio",54:"Il cappello",55:"La mosca",56:"La carota",57:"Lo scartellato",58:"Il pacchetto",59:"I peli",60:"Si lamenta",61:"Il cacciatore",62:"Il morto ucciso",63:"La sposa",64:"La sciocchezza",65:"Il pianto",66:"Le due zitelle",67:"Il tarlo nella chitarra",68:"La zuppa cotta",69:"Sotto la coppa",70:"Il palazzo",71:"La sedia",72:"La meraviglia",73:"L'ospedale",74:"La grotta",75:"Pulcinella",76:"La fontana",77:"I diavoletti",78:"La bella ragazza",79:"Il lariul\xe0",80:"La bocca",81:"I fiori",82:"La tavola imbandita",83:"Il maltempo",84:"La chiesa",85:"Le anime del purgatorio",86:"La bottega",87:"Le parrucche",88:"Le casacavallo",89:"La vecchia",90:"La paura"},l=function(){return"italiano"===localStorage.getItem("linguaSmorfia")?r:n}}},function(e){e.O(0,[416,126,774,888,179],(function(){return a=8386,e(e.s=a);var a}));var a=e.O();_N_E=a}]);